---
title: "Understanding Risk"
---

```{r}
#| include: false
if (!require("pacman")) install.packages("pacman")
pacman::p_load(tidyverse, ggplot2, gganimate, gapminder, scales, hrbrthemes, OECD, here, png, gifski, magick, pdftools)
```

As George Costanza once learned from his audio book in *Seinfeld*, “In order to manage risk, we must first define risk.” In the context of health insurance, risk refers to the uncertainty surrounding our future need for medical care. I may get sick or injured tomorrow, or I may not. This exposes me to two types of risk: health risk (uncertainty about whether I need care) and financial risk (uncertainty about whether I will have to pay for that care). These two elements motivate the very existence of health insurance.

## Describing Risk

To understand how insurance works, we need a structured way to quantify risk. This involves four building blocks:

1. **Probabilities:** How likely different outcomes are.
2. **Payoffs:** The monetary consequences of those outcomes.
3. **Expected values:** A way to combine probabilities and payoffs into a single “average” measure of what we face before the outcome is realized.
4. **Preferences:** How individuals evaluate uncertain outcomes, often represented by a utility function.

We’ll look at each of these in turn.

### Probability

Probability measures the likelihood that a given outcome will occur. For example, this [risk calculator](https://tools.acc.org/ascvd-risk-estimator-plus/#!/calculate/estimate/) can estimate my 10-year risk of heart disease. Suppose it tells me 10%. This means that if there were 1,000 people just like me, about 100 would develop heart disease over the next decade, while 900 would not.

In this chapter, we’ll work with the simplest setting: only two possible outcomes — sick or healthy. Let $p_s$ denote the probability of sickness and $p_h$ the probability of remaining healthy. Since these are the only two possibilities, $p_h = 1 - p_s$. Car insurers do the same calculation. If 5% of drivers like you have an accident each year, then out of 1,000 similar drivers, 50 will file claims while 950 will not. The logic is identical to health risks.

### Payoffs

Payoffs are the monetary value of each possible outcome. Suppose I start with \$1,000 in wealth. If I get sick, I incur \$500 in health care costs, leaving me with $w_s = 1000 - 500 = 500$. If I remain healthy, I pay nothing, so $w_h = 1000$.

### Expected value

```{r}
#| include: false
wh <- 1000
ws <- 500

ph <- 0.9
ps <- 0.1

util <- function(x) {
  sqrt(x)
}

e.pay <- ph*wh + ps*ws
e.cost <- (wh-ws)*ps
e.util <- ph*util(wh) + ps*util(ws)

```

Before the outcome is realized, I can calculate the expected value of my wealth: the probability-weighted average of possible payoffs:

$$E[w] = p_{h}w_{h} + p_{s}w_{s}$$

With $p_h = 0.9$ and $p_s = 0.1$, the expected wealth is $r round(e.pay, 2).

We can also compute expected costs. Because costs only occur if I’m sick, $E[cost]=p_{h} \times 0 + p_{s} \times cost_{s} = p_{s}cost_{s}$, or \$`r round(e.cost, digits=2)`. Expected wealth and expected cost are related but distinct. Individuals think about expected wealth (what they keep), while insurers focus on expected cost (what they must cover).

### Preferences

Preferences describe how people value different outcomes. In economics, we represent them with a utility function $u(w)$, where $w$ is wealth. A standard assumption is diminishing marginal utility: each extra dollar is worth less to you the richer you are. Formally, if $x_1 < x_2$, then $u'(x_1) > u'(x_2)$.

We can then form *expected utility*:

$$E[u(w)]=p_{h}u(w_{h}) + p_{s}u(w_{s})$$

For example, if $u(w) = \sqrt{w}$, the expected utility is r round(e.util, 2). Notice that this is not the utility of the expected wealth — it’s the expectation of utility values. This distinction is critical for understanding risk aversion, risk premiums, and willingness to pay for insurance.

## Risk preferences

With probabilities, payoffs, and utility in place, we can classify risk attitudes:

1. **Risk averse:** Prefers a certain outcome equal to the expected value over the risky gamble. (Certainty equivalent $CE < E[w]$.)
2. **Risk neutral:** Indifferent between the certain outcome and the gamble. ($CE = E[w]$.)
3. **Risk loving:** Prefers the gamble over the certain outcome. ($CE > E[w]$.)

For our purposes, we assume risk aversion, which naturally arises from diminishing marginal utility. @fig-risk-averse illustrates risk aversion. The line segment between $u(w_s)$ and $u(w_h)$ represents expected utility. Because the utility function is concave, this line always lies below the curve. The implication: given a choice, individuals prefer a certain wealth level to a risky prospect with the same expected value.


```{tikz}
#| echo: false
#| fig.cap: "Depiction of risk aversion"
#| label: fig-risk-averse

\usetikzlibrary{calc}
\begin{tikzpicture}[my plot/.style={
                        thick,
                        smooth,
                        samples=100,
                        domain=0.1:5},
                    scale=0.75,
                    my grid/.style={dashed,opacity=0.5, every node/.style={black,opacity=1, transform shape}},
                    my axis/.style={latex-latex}]
\draw[my plot] (0,0) plot (\x,{ln(\x)});
\coordinate (start plot) at (0.1,{ln(0.1)}); % domain start
\coordinate (end plot) at (5,{ln(5)}); % domain end
%\draw[my axis] ([shift={(-0.5cm,0.5cm)}]start plot |- end plot) node[left] {$u(\cdot)$} |- node[coordinate](origin){} ([shift={(0.5cm,-0.5cm)}]start plot -| end plot) node[below] {$\cdot$};
\draw[my axis] ([shift={(-0.5cm,0.5cm)}]start plot |- end plot) |- node[coordinate](origin){} ([shift={(0.5cm,-0.5cm)}]start plot -| end plot);
\def\x{0.5}\def\y{4}\def\p{0.55} % define the x, y and p values
\coordinate (Ux) at (\x,{ln(\x)}); % set the u(x) coordinate
\coordinate (Uy) at (\y,{ln(\y)}); % set the u(y) coordinate
\coordinate (Up) at ({\p*\x+(1-\p)*\y},{ln(\p*\x+(1-\p)*\y)}); % set the u(p*x+(1-p)*y) coordinate
\draw (Ux) -- coordinate[pos=1-\p] (Up-mid) (Uy); % set the coordinate on the linear curve
\path let \p1=(Up-mid), \n1={pow(e,\y1*0.03514)} in (28.4576*\n1,\y1) coordinate (Up-mid2); 
\draw[my grid] (Ux) |- node[below]{$w_{s}$} (origin) |- node[left]{$u(w_{s})$} cycle;
\draw[my grid] (Uy) |- node[below]{$w_{h}$} (origin) |- node[left]{$u(w_{h})$} cycle;
\end{tikzpicture}
```

A more concrete way to capture risk aversion is through the risk premium, $\pi$. This is the extra amount of wealth a person would require to accept a gamble instead of a certain outcome.

@fig-risk-averse2 illustrates. If certainty provides utility $\bar{u}$ at wealth $\bar{w}$, then facing uncertainty requires wealth $\bar{w} + \pi$ to reach the same utility. The difference $\pi$ is the risk premium. We'll get to this in much more detail in the next chapter.

```{tikz}
#| echo: false
#| fig.cap: "Depiction of risk aversion"
#| label: fig-risk-averse2

\usetikzlibrary{calc}
\begin{tikzpicture}[my plot/.style={
                        thick,
                        smooth,
                        samples=100,
                        domain=0.1:5},
                    scale=0.75,
                    my grid/.style={dashed,opacity=0.5, every node/.style={black,opacity=1, transform shape}},
                    my axis/.style={latex-latex}]
\draw[my plot] (0,0) plot (\x,{ln(\x)});
\coordinate (start plot) at (0.1,{ln(0.1)}); % domain start
\coordinate (end plot) at (5,{ln(5)}); % domain end
\draw[my axis] ([shift={(-0.5cm,0.5cm)}]start plot |- end plot) |- node[coordinate](origin){} ([shift={(0.5cm,-0.5cm)}]start plot -| end plot);
\def\x{0.5}\def\y{4}\def\p{0.55} % define the x, y and p values
\coordinate (Ux) at (\x,{ln(\x)}); % set the u(x) coordinate
\coordinate (Uy) at (\y,{ln(\y)}); % set the u(y) coordinate
\coordinate (Up) at ({\p*\x+(1-\p)*\y},{ln(\p*\x+(1-\p)*\y)}); % set the u(p*x+(1-p)*y) coordinate
\draw (Ux) -- coordinate[pos=1-\p] (Up-mid) (Uy); % set the coordinate on the linear curve
\path let \p1=(Up-mid), \n1={pow(e,\y1*0.03514)} in (28.4576*\n1,\y1) coordinate (Up-mid2); 
\draw[my grid] (Ux) |- node[below]{$w_{s}$} (origin) |- node[left]{$u(w_{s})$} cycle;
\draw[my grid] (Uy) |- node[below]{$w_{h}$} (origin) |- node[left]{$u(w_{h})$} cycle;
\draw[my grid] (Up-mid) |- node[below,font=\scriptsize]{$\bar{w}+\pi$} (origin);
\draw[my grid] (Up-mid2) |- node[below, font=\scriptsize]{$\bar{w}$} (origin) |- node[left]{$\bar{u}$} cycle;
\draw[my grid] (Up-mid) -- (Up-mid2);
\end{tikzpicture}
```


## Why This Matters

Insurers care about expected cost when setting premiums. Individuals care about expected utility. The gap between the two — captured by the risk premium — explains why people are willing to pay more than the expected cost for insurance. This difference is the foundation of our next step: quantifying willingness to pay for insurance.